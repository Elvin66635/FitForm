# Добавление авторизации и системы достижений

## Что было добавлено:

### ✅ Firebase интеграция
- Добавлены зависимости Firebase (Auth, Firestore, Storage)
- Настроен Google Services plugin
- Создана структура для синхронизации данных

### ✅ Авторизация
- **Экран авторизации** (`AuthScreen.kt`)
  - Регистрация с email/password
  - Вход с email/password
  - Восстановление пароля
  - Подготовка для Google Sign In
  
- **AuthRepository** - работа с Firebase Authentication
- **AuthViewModel** - управление состоянием авторизации

### ✅ Профиль пользователя
- **UserProfile** модель данных
  - Вес, рост, возраст
  - Цели фитнеса
  - Уровень активности
  
- **UserRepository** - синхронизация профиля с Firestore

### ✅ Система достижений
- **Модели данных**:
  - `Achievement` - описание достижения
  - `UserAchievement` - прогресс пользователя
  
- **Типы достижений**:
  - Общее количество тренировок
  - Количество повторений
  - Серия дней подряд (streak)
  - Идеальная техника
  - Сожженные калории
  - Мастерство в упражнении
  - Завершение программы
  - Недельная цель

- **AchievementRepository** - управление достижениями
- **CheckAchievementsUseCase** - автоматическая проверка и разблокировка

### ✅ Синхронизация прогресса
- **WorkoutRepository** обновлен для синхронизации с Firebase
  - Автоматическая синхронизация сессий тренировок
  - Сохранение userId в сессиях
  - Поддержка офлайн режима

### ✅ Навигация
- Добавлен экран авторизации в навигацию
- Проверка авторизации при запуске приложения
- Автоматический переход на экран авторизации для неавторизованных пользователей
- Кнопка выхода в настройках

### ✅ Обновления UI
- **SettingsScreen** обновлен:
  - Отображение информации о пользователе
  - Кнопка выхода
  - Интеграция с профилем

## Структура данных в Firestore:

### Коллекции:
1. **users** - профили пользователей
2. **achievements** - список всех достижений
3. **user_achievements** - достижения пользователей
4. **workout_sessions** - сессии тренировок

## Что нужно сделать:

### 1. Настройка Firebase
1. Создать проект в Firebase Console
2. Добавить Android приложение
3. Скачать `google-services.json` и поместить в `app/`
4. Включить Authentication (Email/Password)
5. Включить Cloud Firestore
6. Настроить правила безопасности Firestore

Подробные инструкции в [FIREBASE_SETUP.md](FIREBASE_SETUP.md)

### 2. Инициализация достижений
При первом запуске нужно инициализировать достижения в Firestore:
- Используйте `AchievementInitializer.initializeAchievements()`
- Или создайте достижения вручную через Firebase Console

### 3. Google Sign In (опционально)
Для полной поддержки Google Sign In нужно:
- Добавить SHA-1 отпечаток в Firebase Console
- Реализовать Google Sign In в `AuthViewModel.signInWithGoogle()`

## Использование:

### Регистрация нового пользователя:
1. Пользователь открывает приложение
2. Видит экран авторизации
3. Нажимает "Зарегистрироваться"
4. Вводит имя, email и пароль
5. После успешной регистрации переходит в приложение

### Синхронизация данных:
- Все сессии тренировок автоматически синхронизируются с Firebase
- Данные доступны на всех устройствах пользователя
- Работает в офлайн режиме с последующей синхронизацией

### Достижения:
- Автоматически проверяются после каждой тренировки
- Прогресс обновляется в реальном времени
- Разблокированные достижения сохраняются в Firestore

## Следующие шаги (опционально):

1. **Экран достижений** - просмотр всех достижений и прогресса
2. **Профиль пользователя** - редактирование данных профиля
3. **Статистика** - детальная статистика с графиками
4. **Социальные функции** - делиться результатами
5. **Push-уведомления** - напоминания о тренировках



